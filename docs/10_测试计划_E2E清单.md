# 测试计划与 E2E 清单

## 1. 测试金字塔
- 单元测试：领域与适配层；
- 集成测试：OIDC 流程（授权、换 token、刷新、注销）；
- 端到端：浏览器自动化（Playwright）；
- 性能与压测：登录峰值、突发流量；
- 安全测试：ASVS/Top10 清单。

## 2. 用例示例（节选）
- 本地登录成功/失败（锁定/解锁）；
- 外部登录首次绑定/已绑定/取消授权；
- 授权码 + PKCE 正常/篡改/重放；
- 刷新令牌轮换/旧令牌失效；
- 注销前/后通道；
- 多租户 Host 映射与跨租户隔离；
- CORS 与回调 URI 严格匹配；
- 密钥轮换前后 Token 校验；
- 用户导出与删除的数据可追溯验证。

## 3. 自动化脚本
- REST Client/HTTP 文件：冒烟；
- Playwright：登录页面、授权同意、回调、静默续期；
- Gatling/k6：峰值/突发压测脚本（令牌端点、授权端点）。
